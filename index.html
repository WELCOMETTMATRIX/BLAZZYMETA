<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Futuristic Blazzy CRO Metaverse Room</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three/examples/js/controls/PointerLockControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three/examples/js/loaders/RGBELoader.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: Arial, sans-serif;
      background: linear-gradient(180deg, #1a1a1a, #0e0e0e);
    }

    canvas {
      display: block;
    }

    .controller-ui {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
    }

    .controller-ui button {
      width: 50px;
      height: 50px;
      background: rgba(255, 255, 255, 0.1);
      border: 2px solid #00ffcc;
      border-radius: 50%;
      color: white;
      font-size: 20px;
      cursor: pointer;
    }
  </style>
</head>

<body>

<audio id="background-music" loop>
  <source src="path/to/your/background-music.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>
<audio id="click-sound">
  <source src="path/to/your/click-sound.mp3" type="audio/mpeg">
  Your browser does not support the audio element.
</audio>

<div id="controller-ui" class="controller-ui" style="display: none;">
  <button id="up">▲</button>
  <div>
    <button id="left">◀</button>
    <button id="right">▶</button>
  </div>
  <button id="down">▼</button>
</div>

<script>
  // Scene Setup
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 2000);
  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // Background Music
  const backgroundMusic = document.getElementById('background-music');
  const clickSound = document.getElementById('click-sound');
  backgroundMusic.play();

  // Controls
  const controls = new THREE.PointerLockControls(camera, renderer.domElement);
  document.body.addEventListener('click', () => {
    controls.lock();
    clickSound.play();
  });

  // Lighting
  const ambientLight = new THREE.AmbientLight(0x888888, 0.7);
  scene.add(ambientLight);

  const pointLight = new THREE.PointLight(0xffffff, 1, 100);
  pointLight.position.set(10, 20, 15);
  scene.add(pointLight);

  const directionalLight = new THREE.DirectionalLight(0xffffff, 1);
  directionalLight.position.set(-10, 20, -10);
  scene.add(directionalLight);

  // Dynamic Neon Grid
  const gridHelper = new THREE.GridHelper(50, 50, 0x00ff00, 0x0000ff);
  scene.add(gridHelper);

  // Particle System
  const particles = new THREE.BufferGeometry();
  const particleCount = 1000;
  const positions = [];

  for (let i = 0; i < particleCount; i++) {
    positions.push((Math.random() - 0.5) * 100);
    positions.push((Math.random() - 0.5) * 100);
    positions.push((Math.random() - 0.5) * 100);
  }

  particles.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));

  const particleMaterial = new THREE.PointsMaterial({
    color: 0xffffff,
    size: 0.5,
    transparent: true,
    opacity: 0.7
  });

  const particleSystem = new THREE.Points(particles, particleMaterial);
  scene.add(particleSystem);

  // Dynamic Skybox
  const loader = new THREE.CubeTextureLoader();
  const textureCube = loader.load([
    'path/to/px.jpg', 'path/to/nx.jpg',
    'path/to/py.jpg', 'path/to/ny.jpg',
    'path/to/pz.jpg', 'path/to/nz.jpg'
  ]);
  scene.background = textureCube;

  // Animated Holographic Panels
  function createHolographicPanel(x, y, z, text) {
    const canvas = document.createElement('canvas');
    canvas.width = 1024;
    canvas.height = 512;
    const ctx = canvas.getContext('2d');

    ctx.fillStyle = '#000000';
    ctx.globalAlpha = 0.5;
    ctx.fillRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = '#00ffcc';
    ctx.font = '48px Arial';
    ctx.fillText(text, 50, 100);

    const texture = new THREE.CanvasTexture(canvas);
    const material = new THREE.MeshBasicMaterial({
      map: texture,
      transparent: true
    });

    const geometry = new THREE.PlaneGeometry(6, 3);
    const panel = new THREE.Mesh(geometry, material);
    panel.position.set(x, y, z);
    scene.add(panel);

    function animatePanel() {
      requestAnimationFrame(animatePanel);
      panel.rotation.y += 0.005;
    }
    animatePanel();
  }

  createHolographicPanel(0, 5, -15, 'Blazzy Token Info');

  // Token Animation
  const tokenGeometry = new THREE.CylinderGeometry(1, 1, 0.2, 64);
  const tokenMaterial = new THREE.MeshStandardMaterial({
    color: 0xff4500,
    emissive: 0x00ffcc,
    emissiveIntensity: 0.7
  });
  const token = new THREE.Mesh(tokenGeometry, tokenMaterial);
  token.position.set(0, 3, -15);
  scene.add(token);

  function animateToken() {
    token.rotation.x += 0.01;
    token.rotation.y += 0.01;
  }

  // Player Movement
  const player = { x: 0, z: 0 };
  const move = { forward: false, backward: false, left: false, right: false };

  document.addEventListener('keydown', (event) => {
    switch (event.code) {
      case 'KeyW': move.forward = true; break;
      case 'KeyS': move.backward = true; break;
      case 'KeyA': move.left = true; break;
      case 'KeyD': move.right = true; break;
    }
  });

  document.addEventListener('keyup', (event) => {
    switch (event.code) {
      case 'KeyW': move.forward = false; break;
      case 'KeyS': move.backward = false; break;
      case 'KeyA': move.left = false; break;
      case 'KeyD': move.right = false; break;
    }
  });

  function updatePlayerPosition() {
    const direction = new THREE.Vector3();
    if (move.forward) direction.z -= 0.2;
    if (move.backward) direction.z += 0.2;
    if (move.left) direction.x -= 0.2;
    if (move.right) direction.x += 0.2;

    const newX = player.x + direction.x;
    const newZ = player.z + direction.z;

    if (newX > -24.5 && newX < 24.5) player.x = newX;
    if (newZ > -24.5 && newZ < 24.5) player.z = newZ;

    controls.getObject().position.set(player.x, 1.6, player.z);
  }

  // Mobile Controls
  const controllerUI = document.getElementById('controller-ui');
  if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    controllerUI.style.display = 'flex';

    const up = document.getElementById('up');
    const down = document.getElementById('down');
    const left = document.getElementById('left');
    const right = document.getElementById('right');

    up.addEventListener('touchstart', () => move.forward = true);
    up.addEventListener('touchend', () => move.forward = false);

    down.addEventListener('touchstart', () => move.backward = true);
    down.addEventListener('touchend', () => move.backward = false);

    left.addEventListener('touchstart', () => move.left = true);
    left.addEventListener('touchend', () => move.left = false);

    right.addEventListener('touchstart', () => move.right = true);
    right.addEventListener('touchend', () => move.right = false);
  }

  // Animation Loop
  function animate() {
    requestAnimationFrame(animate);
    updatePlayerPosition();
    animateToken();
    renderer.render(scene, camera);
  }

  animate();
</script>

</body>

</html>
